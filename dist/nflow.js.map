{"version":3,"sources":["webpack:///webpack/bootstrap 3a372a3fa251fc9635cc","webpack:///./src/index.js","webpack:///./src/nflow.js","webpack:///./src/factory.js","webpack:///./src/behaviours/index.js","webpack:///./src/behaviours/cancellable.js","webpack:///./src/consts.js","webpack:///./src/utils/index.js","webpack:///./src/utils/serialiser.js","webpack:///./src/logger.js","webpack:///./src/behaviours/connect.js","webpack:///./src/behaviours/create.js","webpack:///./src/behaviours/emit.js","webpack:///./src/routes/index.js","webpack:///./src/routes/upstream.js","webpack:///./src/routes/current.js","webpack:///./src/routes/downstream.js","webpack:///./src/routes/default.js","webpack:///./src/behaviours/identify.js","webpack:///./src/behaviours/listen.js","webpack:///./src/behaviours/loggable.js","webpack:///./src/behaviours/stateful.js","webpack:///./src/behaviours/stats.js","webpack:///./src/behaviours/disposable.js","webpack:///./src/behaviours/namespace.js"],"names":["global","nflow","nFlow","module","exports","root","init","defaults","name","data","flow","factory","behaviours","forEach","d","cancellable","connect","create","disposable","emit","identify","listen","loggable","stateful","stats","namespace","cancel","length","invalidCancelArgs","previousValue","value","isCancelled","concat","parents","some","e","status","CANCELLED","DISPOSED","stopPropagation","direction","toUpperCase","invalidStopPropagationArgs","set","STOPPED","targets","modifiers","target","guid","toObj","createStopPropagationModifiers","propagationStopped","Object","keys","toLowerCase","UNSET","DIRECTION","CURRENT","NONE","DEFAULT","UPSTREAM","DOWNSTREAM","DIRECTION_BITMASK","STATUS","IDLE","FLOWING","COMPLETED","DEFAULTS","ERRORS","invalidGuid","invalidChildren","invalidListener","invalidListenerType","invalidEventName","invalidName","invalidParent","invalidParents","invalidStatus","invalidNamespaceArgs","invalidFullNamespace","invalidDisposeArgs","invalidStopPropagationAugmentation","invalidRoot","invalidStatsArgs","NS_SEPARATOR","serialise","assert","isFlow","isInternal","createMatcher","getLocalName","detach","isDetached","flatten","merge","invalidateListenerCache","dispatchInternalEvent","condition","error","val","Error","replace","matcher","undefined","f","test","split","pop","parent","children","has","array","apply","source","key","updateListenerCache","node","on","listenerCache","listenerMap","newData","oldData","isIgnored","current","up","upstream","down","downstream","log","ignore","JSON","stringify","o","replacer","RECURSION_LIMIT","stack","r","i","parseValue","indexOf","push","Array","join","slice","loggers","isRemote","logger","remoteLog","debug","__nflow_devtools_hook__","propMap","d0","action","props","enableDevTools","enabled","console","warn","reset","recursive","find","findAll","filter","all","get","getAll","childMap","getChildren","c","gc","map","previousParent","attach","parentMap","p","child","instance","inheritStats","nodeDefaults","dispose","oldDirection","args","recipients","recipientsMap","createEmitAPI","route","event","localName","destination","shift","notify","currentNode","isUnreachable","result","notifyListeners","routeMap","reduce","none","match","arr","visitedNodesMap","dir","nodes","visited","createGuid","previousName","call","functions","Math","random","v","toString","oldListeners","l","handlers","listeners","shouldDeliver","listenerName","deliverToHandlers","listener","a","b","hasProp","prop","add","valueF","obj","version","h","previousStats","collapsed","path","reverse","implicit","explicit","ns","full","listenerNode","isLocalNameMatch","id","isNamespaceMatch","localise","nameFrom","localisedNameTo","fullIDs","explicitIDs","every","foundSegment","segment","segments","receiverName","receiverLocalName"],"mappings":"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","file":"nflow.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:5000/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3a372a3fa251fc9635cc","import nflow from './nflow'\nif (global) global.nflow = global.nFlow = nflow // nFlow is now deprecated\nmodule.exports = nflow\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import factory from './factory'\nimport {DEFAULTS} from './consts'\nimport logger from './logger'\n/**\n * The nflow API is designed to be simple and easy to use.<br><br>\n * Essentially, the heart of nflow is only 3 methods :<br>\n *  - {@link flow.create|create},<br>\n *  - {@link flow.on} and<br>\n *  - {@link flow.emit}.<br><br>\n * Since in nflow there is only one type of object, the same API applies to every object created or emitted.<br>\n * Whether they are used as dispatchers, events, stores or controllers - they are the same type of objects and share the same API.<br>\n * @namespace\n * @type flow\n * @name flow\n *\n */\nvar root = factory(DEFAULTS, 'flow', [])\nlogger.init(root)\nexport default root\n\n\n\n// WEBPACK FOOTER //\n// ./src/nflow.js","import behaviours from './behaviours'\nexport default (defaults, name, data) => {\n  var flow = defaults.factory()\n\n  defaults\n    .behaviours\n    .forEach((d) => {\n      behaviours[d](flow, defaults, name, data)\n    })\n  return flow\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/factory.js","import cancellable from './cancellable'\nimport connect from './connect'\nimport create from './create'\nimport emit from './emit'\nimport identify from './identify'\nimport listen from './listen'\nimport loggable from './loggable'\nimport stateful from './stateful'\nimport stats from './stats'\nimport disposable from './disposable'\nimport namespace from './namespace'\n\nexport default {\n  cancellable,\n  connect,\n  create,\n  disposable,\n  emit,\n  identify,\n  listen,\n  loggable,\n  stateful,\n  stats,\n  namespace\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/index.js","import { ERRORS\n       , STATUS\n       , DIRECTION\n       , DIRECTION_BITMASK\n       , UNSET } from '../consts'\nimport { assert, dispatchInternalEvent } from '../utils'\n\nexport default (flow, defaults, name) => {\n  /**\n   *\n   * Cancels the current {@link flow} node.<br><br>\n   *\n   * Cancelling has the following effects:<br>\n   *  - <b>All</b> child nodes of a cancelled node are also cancelled <b>recursively</b>.<br>\n   *  - Cancelled nodes cannot receive events.<br>\n   *  - Cancelled nodes cannot emit events.<br>\n   *  - Cancelled nodes cannot propagate events.<br>\n   *\n   * test\n   *  @codepen GjRaYQ\n   * @return {flow} flow - the current flow node\n   *\n   */\n  flow.cancel = (...args) => {\n    assert(args.length\n         , ERRORS.invalidCancelArgs)\n    let previousValue = flow.cancel.value\n    flow.cancel.value = true\n    dispatchInternalEvent(flow, 'cancel', true, previousValue)\n    return flow\n  }\n  flow.cancel.value = false\n\n  flow.isCancelled = () => {\n    return [flow]\n      .concat(flow.parents())\n      .some(e => e.status() === STATUS.CANCELLED ||\n         e.status() === STATUS.DISPOSED)\n  }\n\n  flow.stopPropagation = (direction = UNSET) => {\n    direction !== UNSET && assert(!DIRECTION[direction.toUpperCase()]\n         , ERRORS.invalidStopPropagationArgs)\n\n    if (direction === UNSET) {\n      flow.status.set(STATUS.STOPPED)\n      flow.emit.targets = []\n      flow.stopPropagation.value = true\n      flow.stopPropagation.modifiers[flow.target.guid] = -1 // bitmask fill\n      dispatchInternalEvent(flow, 'propagationStopped', true)\n    } else {\n      let d = DIRECTION[direction.toUpperCase()]\n      dispatchInternalEvent(flow, 'propagationAugmented', {\n        direction: d,\n        target: flow.target.toObj('name', 'guid')\n      })\n      flow.stopPropagation.modifiers[flow.target.guid.value] |= DIRECTION_BITMASK[d]\n    }\n    return flow\n  }\n\n  flow.stopPropagation.value = false\n  flow.stopPropagation.modifiers = {}\n  createStopPropagationModifiers(flow)\n\n  flow.propagationStopped = () => {\n    return flow.stopPropagation.value\n  }\n}\n/*\n *  create directional (eg. `flow.stopPropagation.dowsntream(...)`) API\n */\nfunction createStopPropagationModifiers (flow) {\n  Object.keys(DIRECTION)\n    .forEach(direction => {\n      flow.stopPropagation[direction] =\n      flow.stopPropagation[direction.toLowerCase()] =\n        () => flow.stopPropagation(direction)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/cancellable.js","export const UNSET = {}\nexport const DIRECTION = {\n  CURRENT: 'CURRENT',\n  NONE: 'CURRENT', // deprecated\n  DEFAULT: 'DEFAULT',\n  UPSTREAM: 'UPSTREAM',\n  DOWNSTREAM: 'DOWNSTREAM'\n}\n\nexport const DIRECTION_BITMASK = {\n  CURRENT: 1 << 0,\n  NONE: 1 << 0, // 1 deprecated\n  DEFAULT: 1 << 1, // 2\n  UPSTREAM: 1 << 2, // 4\n  DOWNSTREAM: 1 << 3 // 8\n}\n\nexport const STATUS = {\n  IDLE: 'IDLE',\n  FLOWING: 'FLOWING',\n  STOPPED: 'STOPPED',\n  COMPLETED: 'COMPLETED',\n  CANCELLED: 'CANCELLED',\n  DISPOSED: 'DISPOSED'\n}\n\nexport const DEFAULTS = {\n  factory: () => ({}),\n  behaviours: [\n    'identify',\n    'stateful',\n    'connect',\n    'create',\n    'disposable',\n    'emit',\n    'listen',\n    'cancellable',\n    'loggable',\n    'stats',\n    'namespace'\n  ],\n  direction: DIRECTION.DEFAULT\n}\nexport const ERRORS = {\n  invalidGuid: 'Invalid Argument. Guid-s are immutable. Please use the .name() API to change the name of a flow object.',\n  invalidChildren: 'Invalid Argument. Please use child.parent(parent) to re-parent flow objects.',\n  invalidListener: 'Invalid Arguments. Expected a String as the listenerName, got: %s',\n  invalidListenerType: 'Invalid Listener function. Expected a function, got: %s',\n  invalidEventName: 'Invalid Arguments. Please use .emit(\"foo\", payload) to emit a flow event.',\n  invalidName: 'Invalid flow Name. Expected a String value, got: %s',\n  invalidParent: 'Invalid flow parent object. Expected a flow instance, got: %s',\n  invalidParents: 'Invalid Argument. Please use the child.parent(parent) API to re-parent flow objects.',\n  invalidStatus: 'Invalid Argument. The .status() API is read only',\n  invalidNamespaceArgs: 'Invalid Argument. The .namespace() API is read only',\n  invalidFullNamespace: 'Invalid Argument. The .namespace.match(full_ns) requires a full namespace array, got: %s',\n  invalidDisposeArgs: 'Invalid Argument. The .dispose() API requires no parameters',\n  invalidCancelArgs: 'Invalid Argument. The .cancel() API requires no parameters',\n  invalidStopPropagationArgs: 'Invalid Argument. The .stopPropagation(direction) API requires either no parameters or a valid flow direction(eg. flow.direction.UPSTREAM)',\n  invalidStopPropagationAugmentation: 'Invalid Argument. The .stopPropagation(direction) API can only be used on emitted events.',\n  invalidRoot: 'Invalid Argument. The .parents.root() API is read only',\n  invalidStatsArgs: 'Invalid Argument. The .stats() API requires an object'\n}\n\nexport const NS_SEPARATOR = ':'\n\n\n\n// WEBPACK FOOTER //\n// ./src/consts.js","import factory from '../factory'\nimport { DEFAULTS\n       , NS_SEPARATOR } from '../consts'\nimport logger from '../logger'\n\nexport {serialise} from './serialiser'\n/*\n *  utils\n */\nexport function assert (condition, error, val) {\n  if (condition) {\n    throw new Error(error\n      .replace('%s', val))\n  }\n  return condition\n}\n\nexport function isFlow (flow) {\n  return flow &&\n    flow.name &&\n    flow.name.isFlow\n}\n\nexport function isInternal (flow) {\n  return flow &&\n    flow.name &&\n    flow.name.isInternal\n}\n\nexport function createMatcher (matcher) {\n  // match ALL\n  if (matcher === true) return () => true\n  // match NONE\n  if (matcher === null || matcher === undefined || matcher === false) return () => false\n  // match by name\n  if (typeof (matcher) === 'string') { return f => f.name() === matcher }\n  // match by regex\n  if (typeof (matcher) === 'object' && matcher.test) return f => matcher.test(f.name())\n  // match by instance\n  if (isFlow(matcher)) return f => f === matcher\n  // custom matcher\n  return matcher\n}\n\n/**\n * returns the Local Name fragment of a namespaced listener or node name.\n * @example\n * 'a:b:foo' -> 'foo'\n * @param  {String} name Listener or node name\n * @return {String} the local name segment\n */\nexport function getLocalName (name) {\n  return name\n    .split(NS_SEPARATOR)\n    .pop()\n}\n\nexport function detach (flow) {\n  flow.parent() &&\n  flow.parent().children.detach(flow)\n}\n\nexport function isDetached (flow) {\n  return !flow.parent() ||\n  !flow.parent().children.has(flow)\n}\n\nexport function flatten (array) {\n  return [].concat.apply([], array)\n}\n\nexport function merge (source, target) {\n  Object.keys(source).forEach(key => {\n    target[key] = source[key]\n  })\n}\n\nexport function invalidateListenerCache (flow) {\n  if (!flow) return\n  updateListenerCache(flow)\n  flow.parents().forEach(updateListenerCache)\n}\n\nfunction updateListenerCache (node) {\n  node.on.listenerCache = {}\n  for (let key in node.on.listenerMap) {\n    node.on.listenerCache[getLocalName(key)] = true\n  }\n  node.children().forEach(f => {\n    for (let key in f.on.listenerCache) {\n      node.on.listenerCache[getLocalName(key)] = true\n    }\n  })\n}\n\nexport function dispatchInternalEvent (flow, name, newData, oldData) {\n  if (isIgnored(flow)) return\n  if (isFlow(newData) && newData.name.isInternal) return\n\n  var current = factory(DEFAULTS, 'flow.' + name)\n  current.name.isInternal = true\n  current.data.value = [newData, oldData]\n  current.parent.value = flow\n  current.emit.current()\n\n  let up = factory(DEFAULTS, 'flow.children.' + name)\n  up.name.isInternal = true\n  up.data.value = [flow, newData, oldData]\n  up.parent.value = flow.parent()\n  up.emit.upstream()\n\n  let down = factory(DEFAULTS, 'flow.parent.' + name)\n  down.name.isInternal = true\n  down.data.value = [flow, newData, oldData]\n  flow.children().forEach(f => f.emit.downstream(down))\n\n  logger.log(flow, name, newData, oldData)\n}\n\nfunction isIgnored (flow) {\n  return flow.name.isInternal || [flow]\n    .concat(flow.parents())\n    .some(e => e.stats.value.ignore)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","export const serialise = o => JSON.stringify(o, replacer())\n\nconst RECURSION_LIMIT = 1024\n\nfunction replacer () {\n  let stack = []\n  let r = 0\n  let i\n  return function replacer (key, value) {\n    if (key === '') {\n      stack = []\n      r = 0\n    }\n    let val = parseValue(value)\n    if (val !== undefined) return val\n    if (!value || RECURSION_LIMIT < ++r) return undefined\n    i = stack.indexOf(value)\n    if (i < 0) return stack.push(value) && value\n    return '*Recursive' + i\n  }\n}\n\nfunction parseValue (value) {\n  switch (typeof value) {\n    case 'function':\n      return ''.concat(\n          'function ',\n          value.name || 'anonymous',\n          '(',\n            Array(value.length + 1).join(',arg').slice(1),\n          ')'\n        )\n    case 'boolean':\n    case 'number':\n    case 'string':\n      return value\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/serialiser.js","import {isInternal, serialise} from './utils'\nimport { UNSET } from './consts'\n\nvar loggers = []\n\nfunction log (flow, name, newData, oldData) {\n  if (!isInternal(flow)) {\n    loggers.forEach(f => {\n      f.isRemote\n        ? f.logger(remoteLog(flow, name, newData, oldData), flow)\n        : f.logger(flow, name, newData, oldData)\n    })\n    debug(flow, name, newData, oldData)\n  }\n}\n\nfunction debug (flow, name, newData, oldData) {\n  typeof global !== 'undefined' &&\n  global.__nflow_devtools_hook__ &&\n  global.__nflow_devtools_hook__(\n    remoteLog(flow, name, newData, oldData), flow)\n}\n\nconst propMap = {\n  'start': ['version', 'status'],\n  'cancel': ['status'],\n  'create': ['status'],\n  'emitted': ['recipients']\n}\n/*\n *  Converts a local log message(direct references) to a remote one(unmarshallable)\n */\nfunction remoteLog (flow, name, d, d0) {\n  let o = {\n    flow: flow.toObj('name', 'guid'),\n    action: name\n  }\n  let props = ['name', 'guid']\n  propMap[name] && props.push(...propMap[name])\n  if (name === 'create' && d.data() !== undefined) props.push('data')\n  let newData = (d && d.toObj ? d.toObj(...props) : serialise(d))\n  let oldData = (d0 && d0.toObj ? d0.toObj(...props) : serialise(d0))\n  if (newData !== undefined) o.d = newData\n  if (oldData !== undefined) o.d0 = oldData\n  return o\n}\n\nfunction init (flow) {\n  flow.enableDevTools = (enabled = true) => {\n    console.warn('flow.enableDevtools() is now deprecated. nflow-devtools will automatically start logging when Chrome devtools is open')\n    return flow\n  }\n\n  flow.logger = (logger = UNSET, isRemote = false) => {\n    if (logger === UNSET) return loggers\n    else loggers.push({logger, isRemote})\n    return flow\n  }\n  flow.logger.reset = () => { loggers = [] }\n  debug(flow, 'start', flow)\n}\n\nexport default {\n  init,\n  log\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logger.js","import { assert,\n  detach,\n  isFlow,\n  dispatchInternalEvent,\n  invalidateListenerCache,\n  createMatcher } from '../utils'\nimport { ERRORS } from '../consts'\n\nexport default (flow) => {\n  /**\n   * [children description]\n   * @parameters  none\n   * @return {flow[]} children - Array of child nodes\n   */\n  flow.children = (...args) => {\n    assert(args.length, ERRORS.invalidChildren)\n    return flow.children.value.concat()\n  }\n  flow.children.value = []\n\n  flow.children.has = (matcher, recursive) => flow.children.find(matcher, recursive) !== undefined\n  flow.children.find = (matcher, recursive = true) => flow.children.findAll(matcher, recursive).pop()\n  flow.children.findAll = (matcher, recursive) => {\n    let filter = createMatcher(matcher)\n    var children = recursive\n      ? flow.children.all()\n      : flow.children()\n    return children.filter(filter)\n  }\n\n  flow.get = flow.children.find\n  flow.getAll = flow.children.findAll\n\n  /**\n   *  return all children recursively\n   */\n  flow.children.all = (...args) => {\n    assert(args.length, ERRORS.invalidChildren)\n    var childMap = {}\n    return getChildren(flow)\n\n    function getChildren (flow) {\n      if (childMap[flow.guid()]) return []\n      childMap[flow.guid()] = true\n      var c = flow.children.value\n      var gc = flow.children.value.map(getChildren)\n\n      return c.concat.apply(c, gc)\n    }\n  }\n\n  /**\n   * Get the parent of the node\n   * @returns {Flow} parent the current date\n   */\n  /**\n   * Set the parent of the node\n   * @param {Flow} parent the new parent node\n   * @returns {Flow} flow the current flow node\n   * @example\n   * let a = nflow.create('a')\n   * let b = nflow.create('b')\n   * a.parent(b) // reparent a onto b\n   */\n  flow.parent = (...parentArgs) => {\n    // TODO: accept an index parameter for attaching the flow node as the nth child\n    if (!parentArgs.length) return flow.parent.value\n    var parent = parentArgs[0]\n    parent && assert(!isFlow(parent), ERRORS.invalidParent, parent)\n    var previousParent = flow.parent()\n    detach(flow)\n    dispatchInternalEvent(flow, 'parent', parent, previousParent)\n    attach(parent)\n    dispatchInternalEvent(flow, 'parented', parent, previousParent)\n    return flow\n  }\n\n  flow.parents = (...args) => {\n    assert(args.length, ERRORS.invalidParents)\n    var parentMap = {}\n    var parents = []\n    var p = flow.parent()\n    while (p && !parentMap[p.guid()]) {\n      parents.push(p)\n      parentMap[p.guid()] = true\n      p = p.parent()\n    }\n    return parents\n  }\n\n  flow.parents.get =\n  flow.parents.find = (matcher) => {\n    if (matcher === null) return null\n    var filter = matcher\n    if (typeof (matcher) === 'string') filter = f => f.name() === matcher\n    else if (isFlow(matcher)) filter = f => f === matcher\n\n    return flow.parents()\n      .filter(filter)\n      .pop()\n  }\n  flow.parents.has = (matcher) => (\n    !!flow.parents.find(matcher)\n  )\n\n  flow.parents.root = (...args) => {\n    assert(args.length, ERRORS.invalidRoot)\n    return flow\n      .parents()\n      .pop()\n  }\n\n  flow.children.detach = (child) => {\n    flow.children.value =\n      flow.children.value\n        .filter(f => f !== child)\n    invalidateListenerCache(flow)\n  }\n\n  flow.target = flow\n\n  function attach (parent) {\n    flow.parent.value = parent\n    if (parent) {\n      parent.children.value.push(flow)\n      invalidateListenerCache(parent)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/connect.js","import factory from '../factory'\nimport { dispatchInternalEvent } from '../utils'\n\nexport default (flow, defaults) => {\n  /**\n   * Create a new flow node.\n   * @memberof flow\n   * @param {string} name The name of the new node\n   * @param {...object} [data] optional data stored in the node\n   * @returns {flow} a new flow instance\n   * @codepen\n   * flow.create('user', {\n   *   id: 12345,\n   *   userName: 'jsmith'\n   *   })\n   *\n   */\n  flow.create = (name, ...data) => {\n    var instance = factory(flow.create.defaults, name, data)\n    instance.parent.value = flow\n    flow.children.value.push(instance)\n    inheritStats(instance)\n    dispatchInternalEvent(flow, 'create', instance)\n\n    return instance\n  }\n\n  flow.create.defaults = {\n    factory: defaults.factory,\n    behaviours: defaults.behaviours.concat(),\n    direction: defaults.direction\n  }\n}\n\nfunction inheritStats (flow) {\n  let p = flow.parent()\n  if (p) {\n    let defaults = p.stats.value.defaults || {}\n    let nodeDefaults = defaults[flow.name.value] || {}\n    /* jshint ignore:start */\n    flow.stats.value = {...nodeDefaults}\n    /* jshint ignore:end */\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/create.js","import { ERRORS\n       , STATUS\n       , DIRECTION\n       , DIRECTION_BITMASK\n       , UNSET } from '../consts'\nimport { merge\n       , detach\n       , assert\n       , isFlow\n       , getLocalName\n       , dispatchInternalEvent } from '../utils'\nimport routes from '../routes'\n\nexport default (flow) => {\n  flow.status = (...args) => {\n    assert(args.length\n         , ERRORS.invalidStatus)\n    if (flow.cancel.value) return STATUS.CANCELLED\n    if (flow.dispose.value) return STATUS.DISPOSED\n    return flow.status.value\n  }\n  flow.status.set = (status) => {\n    if (status === flow.status.value) return\n    !flow.name.isInternal && dispatchInternalEvent(flow, 'status', status, flow.status.value)\n    flow.status.value = status\n  }\n  flow.status.value = STATUS.IDLE\n  merge(STATUS, flow.status)\n\n  flow.direction = (direction = UNSET) => {\n    if (direction === UNSET) return flow.direction.value\n    let oldDirection = flow.direction.value\n    flow.direction.value = direction\n    dispatchInternalEvent(flow, 'direction', direction, oldDirection)\n    return flow\n  }\n  flow.direction.value = flow.create.defaults.direction\n  merge(DIRECTION, flow.direction)\n\n  flow.emit = (name = UNSET, ...args) => {\n    return emit(name, args)\n  }\n  flow.emit.recipients = []\n  flow.emit.recipientsMap = {}\n  createEmitAPI(flow)\n\n  function emit (name = UNSET, args, direction) {\n    if (name === UNSET) {\n      // emit current flow object\n      detach(flow)\n      let p = flow.parent() || flow\n      direction && flow.direction(direction)\n      dispatchInternalEvent(p, 'emit', flow)\n      p.emit.route(flow)\n      dispatchInternalEvent(p, 'emitted', flow)\n      return flow\n    }\n    if (isFlow(name)) {\n      // 1. reparent the passed in flow object where it's emitted from\n      name.parent(flow)\n      // 2.  emit the passed in flow object\n      detach(name)\n      direction && name.direction(direction)\n      args.length && name.data(...args)\n      dispatchInternalEvent(flow, 'emit', name)\n      flow.emit.route(name)\n      dispatchInternalEvent(flow, 'emitted', name)\n      return flow\n    }\n\n    // create and emit a new event\n    assert(typeof (name) !== 'string'\n      , ERRORS.invalidEventName)\n\n    var event = flow.create(name, ...args)\n    detach(event)\n    if (direction) event.direction.value = direction\n    dispatchInternalEvent(flow, 'emit', event)\n    flow.emit.route(event)\n    dispatchInternalEvent(flow, 'emitted', event)\n    return event\n  }\n\n  flow.emit.route = (event) => {\n    event.stopPropagation.value = false\n    event.status.set(STATUS.FLOWING)\n    let localName = getLocalName(event.name())\n    let matcher = f => f.on.listenerCache[localName]\n    event.emit.targets = flow.emit.route[event.direction()](event, matcher)\n      .concat(event.emit.targets || [])\n\n    while (event.emit.targets.length) {\n      var destination = event.emit.targets.shift()\n      if (event.isCancelled()) break\n      if (event.propagationStopped()) break\n      if (destination.flow.isCancelled()) continue\n      notify(event, destination)\n    }\n    if (!event.isCancelled() && !event.propagationStopped()) {\n      event.status.set(STATUS.COMPLETED)\n    }\n  }\n\n  Object.keys(routes).forEach(route => {\n    flow.emit.route[route] =\n    flow.emit.route[route.toUpperCase()] =\n      routes[route]\n  })\n\n  function notify (flow, currentNode) {\n    // only deliver once per node\n    if (flow.emit.recipientsMap[currentNode.flow.guid()]) return\n    if (isUnreachable(flow, currentNode)) return\n    flow.emit.recipientsMap[currentNode.flow.guid()] = flow.direction()\n    let result = currentNode.flow.on.notifyListeners(flow)\n    if (result) {\n      result.route = currentNode.route\n      result.direction = flow.direction()\n      flow.emit.recipients.push(result)\n    }\n  }\n\n  function isUnreachable (flow, destination) {\n    let modifiers = Object.keys(flow.stopPropagation.modifiers)\n    if (!modifiers.length) return false\n\n    let routeMap = destination.route.reduce((i, route) => {\n      i[route.flow.guid()] |= DIRECTION_BITMASK[route.direction]\n      return i\n    }, {})\n\n    return modifiers.some(guid => {\n      return routeMap[guid] === flow.stopPropagation.modifiers[guid]\n    })\n  }\n\n/*!\n *  create directional (eg. `flow.emit.dowsntream(...)`) API\n */\n  function createEmitAPI (flow) {\n    Object.keys(DIRECTION)\n    .forEach(direction => {\n      flow.emit[direction] =\n      flow.emit[direction.toLowerCase()] =\n        (name, ...args) => emit(name, args, direction)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/emit.js","import upstream from './upstream'\nimport current from './current'\nimport downstream from './downstream'\nimport _default from './default'\n\nexport default {\n  upstream,\n  downstream,\n  none: current, // deprecated\n  current,\n  'default': _default // IE8 compatibility fix\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/index.js","import { createMatcher } from '../utils'\nimport {DIRECTION} from '../consts'\n\n/*\n *  returns: all parent nodes\n */\nexport default (flow, matcher) => {\n  let match = createMatcher(matcher)\n  return [flow]\n    .concat(flow.parents())\n    .map((flow, i, arr) => ({\n      flow,\n      route: arr.slice(0, i + 1)\n        .map(f => ({\n          flow: f,\n          direction: DIRECTION.UPSTREAM\n        }))\n    }))\n    .filter(f => match(f.flow))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/upstream.js","import { createMatcher } from '../utils'\nimport { DIRECTION } from '../consts'\n/*\n *  returns: only itself and the node emitting it\n */\nexport default (flow, matcher) => {\n  const match = createMatcher(matcher)\n  return [flow]\n    .concat(flow.parent())\n    .map((flow, i, arr) => ({\n      flow,\n      route: arr\n        .slice(0, i + 1)\n        .map((f, i) => ({\n          flow: f,\n          direction: i ? DIRECTION.UPSTREAM : DIRECTION.CURRENT\n        }))\n    }))\n    .filter(f => match(f.flow))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/current.js","import {DIRECTION} from '../consts'\n\nexport default (flow) => {\n  let visitedNodesMap = {}\n  let parent = flow.parent()\n  let dir = f => {\n    if (f === flow) return DIRECTION.CURRENT\n    if (f === parent) return DIRECTION.UPSTREAM\n    return DIRECTION.DOWNSTREAM\n  }\n  let route = getChildren(flow, [])\n    .concat(getChildren(flow.parent()\n      , [{flow: flow, direction: dir(flow)}]))\n\n  return route\n  function getChildren (flow, route) {\n    if (visitedNodesMap[flow.guid()]) return []\n    visitedNodesMap[flow.guid()] = true\n    route = route.concat([{flow: flow, direction: dir(flow)}])\n    var nodes = [{ flow, route }]\n    flow.children()\n      .forEach(f => (nodes = nodes.concat(getChildren(f, route))))\n    return nodes\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/downstream.js","import {isDetached, createMatcher} from '../utils'\nimport {DIRECTION} from '../consts'\n\nexport default (flow, matcher) => {\n  let match = createMatcher(matcher)\n  var visitedNodesMap = {}\n  var route = []\n  var parents = [flow].concat(flow.parents())\n    .map((flow, i, arr) => ({\n      flow,\n      route: arr.slice(0, i + 1)\n        .map(f => ({\n          flow: f,\n          direction: DIRECTION.UPSTREAM\n        }))\n    }))\n\n  parents.forEach(f => {\n      // traverse downstream on detached nodes:\n    visitedNodesMap[f.flow.guid()] = true\n    match(f.flow) && route.push(f)\n\n    if (isDetached(f.flow)) {\n      route = route.concat(getChildren(f.flow, f.route))\n    }\n  })\n  return route\n\n  function getChildren (flow, route) {\n    var visited = (visitedNodesMap[flow.guid()])\n    visitedNodesMap[flow.guid()] = true\n    if (!match(flow)) return []\n    var nodes = visited ? [] : [{ flow, route }]\n    flow.children()\n      .forEach(f => {\n        nodes = nodes\n          .concat(getChildren(f, route\n            .concat([{flow: f, direction: DIRECTION.DOWNSTREAM}]\n          )))\n      })\n    return nodes\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/default.js","import { ERRORS\n       , UNSET } from '../consts'\nimport { assert, dispatchInternalEvent } from '../utils'\n\nexport default (flow, defaults, name) => {\n  flow.guid = (...args) => {\n    assert(args.length\n         , ERRORS.invalidGuid)\n    return flow.guid.value\n  }\n  flow.guid.value = createGuid()\n\n  flow.name = (name = UNSET) => {\n    if (name === UNSET) return flow.name.value\n    assert(typeof (name) !== 'string'\n         , ERRORS.invalidName, name)\n    var previousName = flow.name.value\n    flow.name.value = name\n    dispatchInternalEvent(flow, 'name', name, previousName)\n    return flow\n  }\n  flow.name.value = name || ''\n  flow.name.isFlow = true\n  flow.name.isInternal = false\n\n  flow.call = (...functions) => {\n    functions\n      .filter(f => typeof (f) === 'function')\n      .forEach(f => f.call(flow, flow))\n    return flow\n  }\n}\n\nfunction createGuid () {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\n    .replace(/[xy]/g, c => {\n      let r = Math.random() * 16 | 0\n      let v = c === 'x' ? r : (r & 0x3 | 0x8)\n      return v.toString(16)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/identify.js","import { ERRORS, UNSET, STATUS, DIRECTION_BITMASK } from '../consts'\nimport { assert, dispatchInternalEvent, invalidateListenerCache } from '../utils'\n\nexport default (flow) => {\n  flow.on = (name = UNSET, ...args) => {\n    if (name === UNSET) return flow.on.listenerMap\n    assert(typeof (name) !== 'string'\n      , ERRORS.invalidListener)\n\n    if (!args.length) {\n      return flow.on.listenerMap[name]\n    }\n\n    if (args.length === 1 && args[0] === null) {\n      delete flow.on.listenerMap[name]\n      invalidateListenerCache(flow)\n      dispatchInternalEvent(flow, 'listenerRemoved', {name})\n      return flow\n    }\n    var oldListeners = flow.on.listenerMap[name]\n    flow.on.listenerMap[name] = args\n      .filter(l => !assert(typeof (l) !== 'function'\n        , ERRORS.invalidListenerType, typeof (l) + ': ' + l)\n      )\n    invalidateListenerCache(flow)\n    dispatchInternalEvent(flow, oldListeners\n      ? 'listenerChanged'\n      : 'listenerAdded'\n      , {name, handlers: args.map(d => d.name || 'function')})\n    return flow\n  }\n  flow.on.listenerMap = {}\n  flow.on.listenerCache = {}\n\n  flow.on.notifyListeners = (event) => {\n    let keys = Object.keys(flow.on.listenerMap)\n    let listeners = []\n    event.target = flow\n    keys.forEach(listenerName => {\n      let shouldDeliver = event.namespace.match(flow, listenerName)\n      if (shouldDeliver) {\n        let handlers = flow.on.listenerMap[listenerName]\n        listeners.push({\n          name: listenerName,\n          handlers: deliverToHandlers(event, handlers, flow)\n        })\n      }\n    })\n    delete event.target\n    return listeners.length\n      ? { flow, listeners }\n      : null\n  }\n}\n\nfunction deliverToHandlers (event, handlers, flow) {\n  return handlers\n    .map(listener => {\n      let l = {\n        listener\n      }\n      if (event.status() !== STATUS.FLOWING) {\n        l.status = event.status()\n        return l\n      }\n      if (event.stopPropagation.modifiers[flow.guid.value] &\n        DIRECTION_BITMASK.CURRENT) {\n        l.status = 'SKIPPED'\n        return l\n      }\n      l.status = 'DELIVERED'\n      listener.apply(event, event.data.value)\n      return l\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/listen.js","import { serialise } from '../utils'\n\nexport default (flow) => {\n  flow.toString = () => {\n    return JSON.stringify(flow.toObj())\n  }\n\n  flow.toObj = (...args) => {\n    const props = args.reduce((a, b) => { a[b] = 1; return a }, {})\n    const hasProp = prop => !args.length || props[prop]\n    const add = (name, valueF) => { if (hasProp(name)) obj[name] = valueF() }\n    let obj = {}\n\n    add('name', flow.name)\n    add('guid', flow.guid)\n    add('version', () => flow.version)\n    add('status', flow.status)\n    add('data', () => serialise(flow.data()))\n    add('parent', () => ({\n      name: flow.parent.value && flow.parent.value.name.value,\n      guid: flow.parent.value && flow.parent.value.guid.value\n    }))\n    add('listeners', () => {\n      const l = flow.on()\n      let o = {}\n      Object.keys(l)\n        .forEach(key => {\n          o[key] = l[key].map(f => f.name || 'function')\n        })\n      return o\n    })\n    add('children', () => flow.children()\n      .map(f => f.toObj('name', 'guid')))\n\n    add('recipients', () => {\n      return flow.emit.recipients &&\n      flow.emit.recipients.map(f => ({\n        direction: f.direction,\n        flow: f.flow.toObj('name', 'guid'),\n        route: f.route.map(f => ({\n          flow: f.flow.toObj('name', 'guid'),\n          direction: f.direction\n        })),\n        listeners: f.listeners.map(l => ({\n          name: l.name,\n          handlers: l.handlers.map(h => ({\n            status: h.status,\n            listener: serialise(h.listener)\n          }))\n        }))\n      }))\n    })\n    return obj\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/loggable.js","import { dispatchInternalEvent } from '../utils'\n\nexport default (flow, defaults, name, data) => {\n  flow.data = (...data) => {\n    if (!data.length) {\n      return (flow.data.value.length <= 1)\n        ? flow.data.value[0]\n        : flow.data.value\n    }\n    var oldData = flow.data.value\n    flow.data.value = data\n    dispatchInternalEvent(flow, 'data'\n      , (data.length > 1 ? data : data[0])\n      , (oldData.length > 1 ? oldData : oldData[0]))\n    return flow\n  }\n  flow.data.value = data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/stateful.js","/* globals VERSION */\nimport { assert, dispatchInternalEvent } from '../utils'\nimport { ERRORS } from '../consts'\n\nexport default (flow, defaults) => {\n  flow.stats = (d) => {\n    if (d === undefined) return flow.stats.value\n    assert(typeof (d) !== 'object'\n         , ERRORS.invalidStatsArgs)\n    let previousStats = flow.stats.value\n    /* jshint ignore:start */\n    flow.stats.value = {...flow.stats.value, ...d}\n    /* jshint ignore:end */\n    dispatchInternalEvent(flow, 'stats', flow.stats.value, previousStats)\n    return flow\n  }\n\n  flow.stats.value = {\n    ignore: false, // do not track this node\n    collapsed: false\n  }\n\n  flow.version = VERSION\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/stats.js","import { assert, dispatchInternalEvent } from '../utils'\nimport { ERRORS } from '../consts'\n\nexport default (flow, defaults) => {\n  /**\n   * [dispose description]\n   * @return {flow} flow - the current node\n   */\n  flow.dispose = (...args) => {\n    assert(args.length\n         , ERRORS.invalidDisposeArgs)\n    if (flow.dispose.value === true) return\n\n    // recursively(depth first) dispose all downstream nodes\n    flow.children().forEach(f => f.dispose())\n\n    dispatchInternalEvent(flow, 'dispose', true)\n    flow.parent(null)\n    flow.dispose.value = true\n    flow.on.listenerMap = {}\n\n    return flow\n  }\n  flow.dispose.value = false\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/disposable.js","import { assert, getLocalName } from '../utils'\nimport { ERRORS, NS_SEPARATOR } from '../consts'\n\nexport default (flow, defaults, name, data) => {\n  flow.namespace = (...args) => {\n    assert(args.length, ERRORS.invalidNamespaceArgs)\n    return flow.namespace.path()\n      .map(f => f.name())\n      .join(NS_SEPARATOR)\n  }\n\n  flow.namespace.path = (...args) => {\n    assert(args.length, ERRORS.invalidNamespaceArgs)\n    return flow\n      .parents()\n      .reverse()\n      .concat(flow)\n  }\n\n  /**\n   * The Implicit namespace part of the node is defined by its parents.\n   * For example:\n   * If the node's parent is `a` and `a`'s parent is `b`:\n   * The node's implicit namespace is `a:b`\n   * @param  none\n   * @return {String[]} The implicit namespace segment of the node\n   */\n  flow.namespace.implicit = (...args) => {\n    assert(args.length, ERRORS.invalidNamespaceArgs)\n    return flow\n      .parents()\n      .reverse()\n      .map(f => f.name())\n  }\n  /**\n   * The Explicit namespace identifier is defined as part of the node's name\n   * For example:\n   * If the node's name is `x:y:foo`\n   * The node's explicit namespace is `x:y`\n   * @param  none\n   * @return {String[]} The explicit namespace identifier of the node\n   */\n  flow.namespace.explicit = (...args) => {\n    assert(args.length, ERRORS.invalidNamespaceArgs)\n    let ns = flow\n      .name()\n      .split(NS_SEPARATOR)\n    ns.pop()\n    return ns\n  }\n\n  /**\n   * The local name segment of the full namespace\n   * @example\n   * let foo = flow.create('x:y:foo')\n   * foo.namespace.localName() // -> foo'\n   * @param  none\n   * @return {String} The local name of the node\n   */\n  flow.namespace.localName = (...args) => {\n    assert(args.length, ERRORS.invalidNamespaceArgs)\n    return flow\n      .name()\n      .split(NS_SEPARATOR)\n      .pop()\n  }\n  /**\n   * The full namespace of the node including the:\n   *  - implicit ns identifiers,\n   *  - explicit namespace identifiers\n   *  - and the local name.\n   * @example\n   * let foo = flow.create('a').create('b').create('x:y:foo')\n   * foo.namespace.full() // -> ['a','b','x','y','foo']\n   * @param  none\n   * @return {Array} The full namespace of the node\n   */\n  flow.namespace.full = (...args) => {\n    assert(args.length, ERRORS.invalidNamespaceArgs)\n    return flow.namespace.implicit()\n      .concat(flow.name().split(NS_SEPARATOR))\n  }\n\n  /**\n   * Checks if the emitted event and the receiving node are in compatible namespaces.\n   * An event can be delivered if the following checks pass:\n   *  - the local names are the same\n   *  - the full NS of the sender contains the explicit NS of the receiver\n   *  - the full NS of the receiver contains the explicit NS of the sender\n   * @param  {flow} listenerNode The node receiving the event\n   * @param  {[type]} listenerName the name of the event, optionally including the explicit namespace, eg.:`x:y:foo`\n   * @return {[type]} true if the event can be delivered to the receiving node\n   */\n  flow.namespace.match = (listenerNode, listenerName) => {\n    assert(\n       typeof (listenerName) !== 'string'\n     , ERRORS.invalidListener\n     , listenerName)\n\n    // 1. Check that the local names match\n    if (!isLocalNameMatch({id: getLocalName(flow.name()), f: flow}, listenerName)) return false\n    // 2. Check that the receiver's explicit NS matches the sender's NS\n    if (!isNamespaceMatch(flow, flow.name(), listenerNode.namespace.localise(listenerName))) return false\n    // 2. Check that the sender's explicit NS matches the receiver's NS\n    if (!isNamespaceMatch(listenerNode, listenerName, flow.namespace.localise(flow.name()))) return false\n    return true\n  }\n\n  /**\n   * Checks if the node's FULL NS matches the name's explicit identifiers\n   * @param  {[type]}  node the node to get the full NS from\n   * @param  {[type]}  localisedNameTo The node name to get the explicit identifiers from\n   * @return {Boolean} true if the name's explicit identifiers sit inside the node's NS\n   */\n  function isNamespaceMatch (node, nameFrom, localisedNameTo) {\n    let fullIDs = nameFrom\n      .split(NS_SEPARATOR)\n      .map(id => ({ id, f: node }))\n      .reverse()\n      .concat(node\n        .parents()\n        .map(f => ({ id: f.name(), f }))\n      )\n\n    let explicitIDs = localisedNameTo.split(NS_SEPARATOR).reverse()\n    return explicitIDs.every(segment => {\n      let foundSegment = false\n      while (fullIDs.length) {\n        let p = fullIDs.shift()\n        if (isLocalNameMatch(p, segment)) {\n          foundSegment = true\n          break\n        }\n      }\n      return foundSegment\n    })\n  }\n\n  /**\n   * Resolves a listener name(ie. explicit ns + local name) to a localised one,\n   * replacing generic namespace identifiers with explicit guid-s\n   * @example\n   * let foo = flow\n   *  .create('x')\n   *  .create('y')\n   *  .create('x:z:foo')\n   *  foo.namespace.localise() // -> '{guid-of-x}:z:foo'\n   * @param  {String} listenerName The name of the listener, optionally including the explicit ns\n   * @return {String} The localised Namespace\n   */\n  flow.namespace.localise = (ns) => {\n    assert(\n       typeof (ns) !== 'string'\n     , ERRORS.invalidListener\n     , ns)\n\n    let segments = ns.split(NS_SEPARATOR)\n    if (segments.length > 1 &&\n      flow.parents.has(segments[0])) {\n      segments[0] = flow.parents.get(segments[0]).guid()\n    }\n\n    return segments.join(NS_SEPARATOR)\n  }\n}\n\n/**\n * Checks if the local name of the sender and receiver nodes are the same\n * @param  {String}  senderLocalName    The name of the emitted event\n * @param  {String}  receiverLocalName The name of the listener\n * @return {Boolean} true if the local names are the same\n */\nfunction isLocalNameMatch ({id, f}, receiverName) {\n  const receiverLocalName = getLocalName(receiverName)\n\n  const match = id === '*' ||\n    receiverLocalName === '*' ||\n    f.guid() === receiverLocalName ||\n    id === receiverLocalName\n\n  return match\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours/namespace.js"],"sourceRoot":""}