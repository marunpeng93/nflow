{"version":3,"sources":["webpack:///webpack/bootstrap a375f8118cf3a369fad5","webpack:///./src/index.js","webpack:///./src/nflow.js","webpack:///./src/factory.js","webpack:///./src/behaviours/index.js","webpack:///./src/behaviours/cancellable.js","webpack:///./src/consts.js","webpack:///./src/utils.js","webpack:///./src/logger.js","webpack:///./src/behaviours/connect.js","webpack:///./src/behaviours/create.js","webpack:///./src/behaviours/emit.js","webpack:///./src/behaviours/identify.js","webpack:///./src/behaviours/listen.js","webpack:///./src/behaviours/loggable.js","webpack:///./src/behaviours/stateful.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;ACrCA,OAAM,CAAC,KAAK,kBAAO;AACnB,OAAM,CAAC,OAAO,kBAAO,C;;;;;;;;;;;;;;;;;;;;;;;;;ACErB,KAAI,IAAI,GAAG,+BAHH,QAAQ,EAGa,MAAM,CAAC;AACpC,kBAAO,IAAI,CAAC,IAAI,CAAC;AACjB,OAAM,CAAC,KAAK,GAAG,IAAI;mBACJ,IAAI,C;;;;;;;;;;;;;;;KCPP,UAAU;;;;mBAGP,UAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAG;AACrC,OAAI,IAAI,GAAG,QAAQ,CAAC,OAAO,EAAE;;AAE7B,WAAQ,CACL,UAAU,CACV,OAAO,CAAC,UAAC,CAAC,EAAG;AACZ,eAAU,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC;IAC5C,CAAC;;AAEF,UAAO,IAAI;EACZ,C;;;;;;;;;;;;;;;;;yBCbO,OAAO;;;;;;;;;qBACP,OAAO;;;;;;;;;oBACP,OAAO;;;;;;;;;kBACP,OAAO;;;;;;;;;sBACP,OAAO;;;;;;;;;oBACP,OAAO;;;;;;;;;sBACP,OAAO;;;;;;;;;sBACP,OAAO;;;;;;;;;;;;;;;;;;mBCAA,UAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAG;;AAErC,OAAI,CAAC,MAAM,GAAG,YAAa;AACzB,gBALI,MAAM,EAKH,UAAK,MAAM,EACX,QAVF,MAAM,CAUG,iBAAiB,CAAC;AAChC,gBAPoB,qBAAqB,EAOnB,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC;AAC3C,SAAI,CAAC,MAAM,CAAC,KAAK,GAAG,QAXf,MAAM,CAWgB,SAAS;AACpC,YAAO,IAAI;IACZ;;AAED,OAAI,CAAC,WAAW,GAAG,YAAM;AACvB,YAAO,CAAC,IAAI,CAAC,CACV,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CACtB,IAAI,CAAC,WAAC;cAAE,CAAC,CAAC,MAAM,CAAC,KAAK,IAAI,QAlBxB,MAAM,CAkByB,SAAS;MAAA,CAAC;IAC/C;;AAED,OAAI,CAAC,eAAe,GAAG,YAAa;AAClC,gBAnBI,MAAM,EAmBH,UAAK,MAAM,EACX,QAxBF,MAAM,CAwBG,0BAA0B,CAAC;AACzC,SAAI,CAAC,MAAM,CAAC,KAAK,GAAG,QAxBf,MAAM,CAwBgB,OAAO;AAClC,gBAtBoB,qBAAqB,EAsBnB,IAAI,EAAE,oBAAoB,EAAE,IAAI,CAAC;AACvD,YAAO,IAAI;IACZ;;AAED,OAAI,CAAC,kBAAkB,GAAG,YAAM;AAC9B,YAAO,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,QA9BvB,MAAM,CA8BwB,OAAO;IAC3C;EACF,C;;;;;;;;;;;;;;;AC9BM,KAAM,KAAK,WAAL,KAAK,GAAG,EAAE;AAChB,KAAM,SAAS,WAAT,SAAS,GAAG;AACvB,OAAI,EAAE,MAAM;AACZ,UAAO,EAAE,SAAS;AAClB,WAAQ,EAAE,UAAU;AACpB,aAAU,EAAE,YAAY;EACzB;;AAEM,KAAM,MAAM,WAAN,MAAM,GAAG;AACpB,OAAI,EAAE,MAAM;AACZ,UAAO,EAAE,SAAS;AAClB,UAAO,EAAE,SAAS;AAClB,YAAS,EAAE,WAAW;AACtB,YAAS,EAAE,WAAW;EACvB;;AAEM,KAAM,QAAQ,WAAR,QAAQ,GAAG;AACtB,UAAO,EAAE;YAAK,EAAE;IAAC;AACjB,aAAU,EAAC,CACT,UAAU,EACV,UAAU,EACV,SAAS,EACT,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,aAAa,EACb,UAAU,CACX;AACD,YAAS,EAAE,SAAS,CAAC,OAAO;EAC7B;AACM,KAAM,MAAM,WAAN,MAAM,GAAG;AACpB,cAAW,EAAM,yGAAyG;AAC1H,kBAAe,EAAE,8EAA8E;AAC/F,kBAAe,EAAE,yEAAyE;AAC1F,sBAAmB,EAAE,yDAAyD;AAC9E,mBAAgB,EAAC,2EAA2E;AAC5F,cAAW,EAAC,qDAAqD;AACjE,gBAAa,EAAC,+DAA+D;AAC7E,iBAAc,EAAC,sFAAsF;AACrG,gBAAa,EAAC,kDAAkD;AAChE,oBAAiB,EAAC,4DAA4D;AAC9E,6BAA0B,EAAC,qEAAqE;AAChG,cAAW,EAAC,wDAAwD;EACrE,C;;;;;;;;;;;SCrCe,MAAM,GAAN,MAAM;SAQN,MAAM,GAAN,MAAM;SAMN,UAAU,GAAV,UAAU;SAMV,MAAM,GAAN,MAAM;SAKN,UAAU,GAAV,UAAU;SAKV,OAAO,GAAP,OAAO;SAIP,KAAK,GAAL,KAAK;SAML,qBAAqB,GAArB,qBAAqB;;;;;;;;;;;;;;;;;AAxC9B,UAAS,MAAM,CAAC,SAAS,EAAE,KAAK,EAAE,GAAG,EAAC;AAC3C,OAAI,SAAS,EAAE;AACb,WAAM,IAAI,KAAK,CAAC,KAAK,CAClB,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;IACvB;AACD,UAAO,SAAS;EACjB;;AAEM,UAAS,MAAM,CAAC,IAAI,EAAC;AAC1B,UAAO,IAAI,IACN,IAAI,CAAC,IAAI,IACT,IAAI,CAAC,IAAI,CAAC,MAAM;EACtB;;AAEM,UAAS,UAAU,CAAC,IAAI,EAAC;AAC9B,UAAO,IAAI,IACN,IAAI,CAAC,IAAI,IACT,IAAI,CAAC,IAAI,CAAC,UAAU;EAC1B;;AAEM,UAAS,MAAM,CAAC,IAAI,EAAC;AAC1B,OAAI,CAAC,MAAM,EAAE,IACR,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC;EACzC;;AAEM,UAAS,UAAU,CAAC,IAAI,EAAC;AAC9B,UAAO,CAAC,IAAI,CAAC,MAAM,EAAE,IAChB,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC;EACvC;;AAEM,UAAS,OAAO,CAAC,KAAK,EAAC;AAC5B,UAAO,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;EACnC;;AAEM,UAAS,KAAK,CAAC,MAAM,EAAE,MAAM,EAAC;AACnC,SAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,aAAG,EAAE;AAC/B,WAAM,CAAC,GAAG,CAAC,GAAE,MAAM,CAAC,GAAG,CAAC;IACzB,CAAC;EACH;;AAEM,UAAS,qBAAqB,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAC;AACjE,OAAI,CAAC,GAAE,+BAlDA,QAAQ,EAkDU,OAAO,GAAC,IAAI,CAAC;AACtC,IAAC,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI;AACxB,IAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC;AACjC,IAAC,CAAC,SAAS,CAAC,KAAK,GAAE,QAlDZ,SAAS,CAkDa,IAAI;AACjC,IAAC,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI;AACrB,IAAC,CAAC,IAAI,EAAE;AACR,IAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,CAAC;AACvC,IAAC,CAAC,SAAS,CAAC,KAAK,GAAE,QAtDZ,SAAS,CAsDa,QAAQ;AACrC,IAAC,CAAC,IAAI,CAAC,KAAK,GAAC,gBAAgB,GAAC,IAAI;AAClC,IAAC,CAAC,IAAI,EAAE;;AAER,IAAC,CAAC,SAAS,CAAC,KAAK,GAAE,QA1DZ,SAAS,CA0Da,UAAU;AACvC,IAAC,CAAC,IAAI,CAAC,KAAK,GAAC,cAAc,GAAC,IAAI;AAChC,IAAC,CAAC,IAAI,EAAE;;AAER,oBAAO,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;AC1D1C,KAAI,eAAe,GAAG,KAAK;AAC3B,KAAI,OAAO,GAAG,EAAE;;AAEhB,UAAS,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAC;AACxC,IAAC,WAZK,UAAU,EAYJ,IAAI,CAAC,IACZ,OAAO,CAAC,OAAO,CAAC,WAAC;YAAE,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,CAAC;IAAA,CAAC;;AAExD,kBAAe,IACV,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,CAAC;EACzC;;AAED,UAAS,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,EAAE,EAAC;AAC/B,iBAAc,CAAC,IAAI,EACjB;AACE,SAAI,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK;AAClB,OAAE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK;AAChB,aAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK;IAC1B,CAAC;EACL;;AAED,UAAS,cAAc,CAAC,MAAM,EAAE,OAAO,EAAC;AACtC,OAAI,WAAW,GAAG;AAChB,WAAM,EAAE,MAAM;AACd,YAAO,EAAC,OAAO;IAChB,CAAC;AACF,OAAI,SAAS,GAAG,IAAI,QAAQ,CAAC,WAAW,CAAC,WAAW,CAAC,WAAW,EAAE,EAAC,MAAM,EAAE,WAAW,EAAC,CAAC,CAAC;AACzF,WAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;EACnC;;AAGD,UAAS,IAAI,CAAC,IAAI,EAAC;;AAEjB,OAAI,CAAC,cAAc,GAAG,YAAiB;SAAhB,OAAO,iEAnCvB,KAAK;;AAoCV,SAAI,OAAO,aApCN,KAoCc,EAAE,OAAO,eAAe;AAC3C,oBAAe,GAAG,OAAO;AACzB,SAAI,OAAO,EAAE;AACX,qBAAc,CAAC,OAAO,EAAE;AACtB,aAAI,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK;AACrB,WAAE,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK;QACpB,CAAC;MACH;AACD,YAAO,IAAI;IACZ;;AAGD,OAAI,CAAC,MAAM,GAAG,YAAkB;SAAjB,MAAM,iEAhDd,KAAK;;AAiDV,SAAI,MAAM,aAjDL,KAiDa,EAAE,OAAO,OAAO;AAClC,YAAO,CAAC,IAAI,CAAC,MAAM,CAAC;AACpB,YAAO,IAAI;IACZ;EAEF;;mBAGc;AACb,OAAI,EAAJ,IAAI;AACJ,MAAG,EAAH,GAAG;AACH,iBAAc,EAAd,cAAc;EACb,C;;;;;;;;;;;;;;;;mBC/DY,UAAC,IAAI,EAAG;;;;;AAKrB,OAAI,CAAC,QAAQ,GAAG,YAAa;AAC3B,gBATI,MAAM,EASH,UAAK,MAAM,EAAE,QARf,MAAM,CAQgB,eAAe,CAAC;AAC3C,YAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE;IACpC;AACD,OAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,EAAE;;AAExB,OAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,UAAC,OAAO,EAAE,SAAS;YAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,IAAE,IAAI;IAAA;AACtF,OAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,UAAC,OAAO,EAAE,SAAS;YAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC,GAAG,EAAE;IAAA;AAC1F,OAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,UAAC,OAAO,EAAE,SAAS,EAAG;;AAE5C,SAAI,MAAM,GAAG,OAAO,CAAC;AACrB,SAAI,OAAO,IAAE,IAAI,EAAE,OAAO,EAAE;AAC5B,SAAI,OAAO,OAAQ,IAAE,QAAQ,EAAE,MAAM,GAAG,WAAC;cAAE,CAAC,CAAC,IAAI,EAAE,IAAE,OAAO;MAAA,MACvD,IAAI,WArBkC,MAAM,EAqBjC,OAAO,CAAC,EAAE,MAAM,GAAG,WAAC;cAAE,CAAC,IAAE,OAAO;MAAA;AAChD,SAAI,QAAQ,GAAG,SAAS,GACpB,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,GACnB,IAAI,CAAC,QAAQ,EAAE;;AAEnB,YAAO,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC;IAC/B;;AAED,OAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI;AAC7B,OAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI;;;;;AAKhC,OAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,YAAW;AAC7B,gBApCI,MAAM,EAoCH,UAAK,MAAM,EAAE,QAnCf,MAAM,CAmCgB,eAAe,CAAC;AAC3C,SAAI,QAAQ,GAAG,EAAE;AACjB,YAAO,WAAW,CAAC,IAAI,CAAC;;AAExB,cAAS,WAAW,CAAC,IAAI,EAAC;AACxB,WAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC;AACrC,eAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI;AAC5B,WAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK;AAC3B,WAAI,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC;;AAE7C,cAAO,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAC9B;IAEF;;;;;AAKD,OAAI,CAAC,MAAM,GAAG,YAAkB;SAAjB,MAAM,iEArDN,KAAK;;AAsDlB,SAAI,MAAM,aAtDG,KAsDK,EAAE,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;AAC7C,WAAM,IAAI,WAxDN,MAAM,EAwDO,CAAC,WAxDyB,MAAM,EAwDxB,MAAM,CAAC,EAAE,QAvD7B,MAAM,CAuD8B,aAAa,EAAE,MAAM,CAAC;AAC/D,SAAI,cAAc,GAAG,IAAI,CAAC,MAAM,EAAE;AAClC,gBA1DY,MAAM,EA0DX,IAAI,CAAC;AACZ,gBA3DoB,qBAAqB,EA2DnB,IAAI,EAAE,cAAc,EAAE,cAAc,CAAC;AAC3D,WAAM,CAAC,MAAM,CAAC;AACd,gBA7DoB,qBAAqB,EA6DnB,IAAI,EAAE,YAAY,EAAE,MAAM,EAAE,cAAc,CAAC;AACjE,YAAO,IAAI;IACZ;;AAED,OAAI,CAAC,OAAO,GAAG,YAAW;AACxB,gBAlEI,MAAM,EAkEH,UAAK,MAAM,EAAE,QAjEf,MAAM,CAiEgB,cAAc,CAAC;AAC1C,SAAI,SAAS,GAAG,EAAE;AAClB,SAAI,OAAO,GAAG,EAAE;AAChB,SAAI,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE;AACrB,YAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,EAAC;AAC/B,cAAO,CAAC,IAAI,CAAC,CAAC,CAAC;AACf,gBAAS,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,GAAC,IAAI;AACxB,QAAC,GAAG,CAAC,CAAC,MAAM,EAAE;MACf;AACD,YAAO,OAAO;IACf;;AAED,OAAI,CAAC,OAAO,CAAC,IAAI,GAAG,UAAC,OAAO,EAAG;AAC7B,YAAO,IAAI,CAAC,OAAO,EAAE,CAClB,MAAM,CAAC,OAAO,OAAQ,IAAE,QAAQ,GAC1B,WAAC;cAAE,CAAC,CAAC,IAAI,EAAE,IAAE,OAAO;MAAA,GACrB,OAAO,CAAC,CACb,GAAG,EAAE;IACT;;AAED,OAAI,CAAC,OAAO,CAAC,IAAI,GAAG,YAAW;AAC7B,gBAvFI,MAAM,EAuFH,UAAK,MAAM,EAAE,QAtFf,MAAM,CAsFgB,WAAW,CAAC;AACvC,YAAO,IAAI,CACR,OAAO,EAAE,CACT,GAAG,EAAE;IACT;;AAED,OAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,UAAC,KAAK,EAAG;AAC9B,SAAI,CAAC,QAAQ,CAAC,KAAK,GACjB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAChB,MAAM,CAAC,WAAC;cAAE,CAAC,IAAE,KAAK;MAAA,CAAC;IACzB;;AAED,YAAS,MAAM,CAAC,MAAM,EAAE;AACtB,WAAM,IAAI,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;AAC1C,SAAI,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM;IAC3B;EAEF,C;;;;;;;;;;;;;;;;;;;;;;;;mBCpGc,UAAC,IAAI,EAAE,QAAQ,EAAG;;AAE/B,OAAI,CAAC,MAAM,GAAG,UAAC,IAAI,EAAc;uCAAT,IAAI;AAAJ,WAAI;;;AAE1B,SAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;AAC7B,SAAI,QAAQ,EAAC;;;AACX,4BAAQ,EAAC,IAAI,kBAAI,IAAI,CAAC;AACtB,cAAO,QAAQ;MAChB;AACD,aAAQ,GAAG,uBAAQ,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC;AACpD,aAAQ,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI;AAC5B,SAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC;AAClC,gBAdY,qBAAqB,EAcX,IAAI,EAAE,QAAQ,EAAE,QAAQ,CAAC;AAC/C,YAAO,QAAQ;IAChB;;AAED,OAAI,CAAC,MAAM,CAAC,QAAQ,GAAG;AACrB,YAAO,EAAE,QAAQ,CAAC,OAAO;AACzB,eAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,MAAM,EAAE;AACxC,cAAS,EAAE,QAAQ,CAAC,SAAS;;IAE9B;EAEF,C;;;;;;;;;;;;;;;;;;;;;;AClBD,KAAI,GAAG,GAAG,iBAAO,GAAG;;mBACL,UAAC,IAAI,EAAG;;AAErB,OAAI,CAAC,MAAM,GAAG,YAAa;AACzB,gBAP4B,MAAM,EAO3B,UAAK,MAAM,EACX,QAbF,MAAM,CAaG,aAAa,CAAC;AAC5B,YAAO,IAAI,CAAC,MAAM,CAAC,KAAK;IACzB;AACD,OAAI,CAAC,MAAM,CAAC,KAAK,GAAG,QAfb,MAAM,CAec,IAAI;AAC/B,cAZM,KAAK,UAJJ,MAAM,EAgBC,IAAI,CAAC,MAAM,CAAC;;AAG1B,OAAI,CAAC,SAAS,GAAG,YAAqB;SAApB,SAAS,iEAjBpB,KAAK;;AAkBV,SAAI,SAAS,aAlBR,KAkBgB,EAAE,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK;AAClD,SAAI,CAAC,SAAS,CAAC,KAAK,GAAG,SAAS;AAChC,YAAO,IAAI;IACZ;AACD,OAAI,CAAC,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS;AACrD,cArBM,KAAK,UAHJ,SAAS,EAwBC,IAAI,CAAC,SAAS,CAAC;;AAEhC,OAAI,CAAC,IAAI,GAAG,YAAyB;uCAAT,IAAI;AAAJ,WAAI;;;SAAnB,IAAI,iEAzBV,KAAK;;AA0BV,SAAI,IAAI,YA1BH,KA0BU,EAAE;;AAEf,kBA1BS,MAAM,EA0BR,IAAI,CAAC;AACZ,UAAG,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC;AACvB,WAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;AACrB,UAAG,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC;AAC1B,cAAO,IAAI;MACZ;AACD,SAAI,WAhC4C,MAAM,EAgC3C,IAAI,CAAC,EAAE;;AAEhB,WAAI,CAAC,MAAM,CAAC,IAAI,CAAC;;;AAGjB,kBArCS,MAAM,EAqCR,IAAI,CAAC;AACZ,UAAG,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC;AACvB,WAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;AACrB,UAAG,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC;AAC1B,cAAO,IAAI;MACZ;;AAED,gBA5C4B,MAAM,EA4C3B,OAAO,IAAK,IAAE,QAAQ,EACzB,QAlDC,MAAM,CAkDA,gBAAgB,CAAC;;AAE5B,SAAI,KAAK,GAAG,IAAI,CAAC,MAAM,OAAX,IAAI,GAAQ,IAAI,SAAK,IAAI,EAAC;AACtC,gBAhDW,MAAM,EAgDV,KAAK,CAAC;AACb,QAAG,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC;AACzB,SAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;AACtB,QAAG,CAAC,KAAK,EAAE,SAAS,EAAE,KAAK,CAAC;AAC5B,YAAO,KAAK;IACb;;AAED,OAAI,CAAC,IAAI,CAAC,KAAK,GAAG,UAAC,IAAI,EAAG;;AAExB,SAAI,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE;AACzB,SAAI,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE;;AAE5B,SAAI,CAAC,MAAM,CAAC,KAAK,GAAG,QAhEf,MAAM,CAgEgB,OAAO;;;AAGlC,SAAI,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,IAAI,CAAC,CACxD,MAAM,CAAC,WAAC,EAAE;AACT,WAAI,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,OAAO,KAAK;AACnD,cAAO,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI;MAChD,CAAC;;AAEJ,YAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAC;AAC9B,WAAI,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;AAC3C,WAAI,IAAI,CAAC,WAAW,EAAE,EAAE,MAAM;AAC9B,WAAI,IAAI,CAAC,kBAAkB,EAAE,EAAE,MAAM;AACrC,aAAM,CAAC,IAAI,EAAE,WAAW,CAAC;MAC1B;IACF;;AAED,OAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,UAAC,IAAI,EAAG;AAChC,YAAO,WA9EY,OAAO,EA8EX,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CACzC,GAAG,CAAC,UAAC,IAAI,EAAG;AACX,WAAI,WAhF4B,UAAU,EAgF3B,IAAI,CAAC,IACf,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,OAAO,CAAC,IAAI,CAAC,CAC/B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;;AAE9B,cAAO,CAAC,IAAI,CAAC;MAChB,CAAC,CAAC;IAAC;;AAEN,OAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAC,IAAI,EAAG;AACjC,YAAO,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;IACrC;;AAED,OAAI,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,UAAC,IAAI,EAAG;AACnC,YAAO,WA5FY,OAAO,EA4FX,CAAC,IAAI,CAAC,CAClB,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CACrB,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CACpC,MAAM,CAAC,OAAO,CAAC,CACjB;IAAC;;AAEJ,OAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,UAAC,IAAI;YAAG,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC;IAAA;;AAEpD,YAAS,MAAM,CAAC,IAAI,EAAE,WAAW,EAAC;AAChC,SAAI,WAAW,CAAC,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE;AACxC,WAAI,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE;AAC9D,WAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;MACvC;IACF;;AAGD,YAAS,sBAAsB,CAAC,WAAW,EAAE,SAAS,EAAC;AACrD,YAAO;AACL,WAAI,EAAE,CAAC,WAAW,CAAC;AACnB,eAAQ,EAAE,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;AAChC,cAAO,EAAE,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;AAC/B,iBAAU,EAAE,WAAW,CAAC,QAAQ,EAAE;OACnC,CAAC,SAAS,CAAC;IACb;EAGF,C;;;;;;;;;;;;;;;;;;;;;;ACnHD,KAAI,IAAI,GAAG,CAAC;;mBACG,UAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAG;;AAErC,OAAI,CAAC,IAAI,GAAG,YAAa;AACvB,gBANI,MAAM,EAMH,UAAK,MAAM,EACX,QAbF,MAAM,CAaG,WAAW,CAAC;AAC1B,YAAO,IAAI,CAAC,IAAI,CAAC,KAAK;IACvB;AACD,OAAI,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,GAAC,IAAI,EAAE;;AAE3B,OAAI,CAAC,IAAI,GAAG,YAAgB;SAAf,IAAI,iEAfV,KAAK;;AAgBV,SAAI,IAAI,aAhBH,KAgBW,EAAE,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK;AACxC,gBAdI,MAAM,EAcH,OAAO,IAAK,IAAE,QAAQ,EACtB,QArBF,MAAM,CAqBG,WAAW,EAAE,IAAI,CAAC;AAChC,SAAI,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK;AAClC,SAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI;AACtB,gBAlBY,qBAAqB,EAkBX,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,YAAY,CAAC;AACvD,YAAO,IAAI;IACZ;AACD,OAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE;AACrC,OAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI;AACvB,OAAI,CAAC,IAAI,CAAC,UAAU,GAAG,KAAK;;AAE5B,OAAI,CAAC,IAAI,GAAG,YAAgB;uCAAZ,SAAS;AAAT,gBAAS;;;AACvB,cAAS,CACN,MAAM,CAAC,WAAC;cAAE,OAAO,CAAE,IAAE,UAAU;MAAA,CAAC,CAChC,OAAO,CAAC,WAAC;cAAE,CAAC,CAAC,IAAI,CAAC;MAAA,CAAC;IACvB;EAEF,C;;;;;;;;;;;;;;;;;;;;;;;;mBClCc,UAAC,IAAI,EAAG;AACrB,OAAI,WAAW,GAAG,EAAE,CAAC;AACrB,OAAI,CAAC,EAAE,GAAG,YAAyB;uCAAT,IAAI;AAAJ,WAAI;;;SAAnB,IAAI,iEANA,KAAK;;AAOlB,SAAI,IAAI,YAPK,KAOE,EAAE,OAAO,WAAW;AACnC,gBAPI,MAAM,EAOH,OAAO,IAAK,IAAE,QAAQ,EACzB,QATC,MAAM,CASA,eAAe,CAAC;;AAE3B,SAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AAChB,cAAO,WAAW,CAAC,IAAI,CAAC;MACzB;;AAED,SAAI,IAAI,CAAC,MAAM,IAAE,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,IAAE,IAAI,EAAE;AACnC,cAAO,WAAW,CAAC,IAAI,CAAC;AACxB,cAAO,IAAI,CAAC;MACb;AACD,gBAAW,CAAC,IAAI,CAAC,GAAG,IAAI,CACrB,MAAM,CAAC,WAAC;cAAE,CAAC,WAnBV,MAAM,EAmBW,OAAO,CAAE,IAAE,UAAU,EACpC,QArBD,MAAM,CAqBE,mBAAmB,EAAE,QAAO,CAAC,yCAAD,CAAC,KAAE,IAAI,GAAC,CAAC,CAAC;MAAA,CAChD;AACH,YAAO,IAAI;IACZ;;AAED,OAAI,CAAC,EAAE,CAAC,eAAe,GAAG,UAAC,KAAK,EAAG;AACjC,SAAI,WAAW,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;AAC7B,YAAK,CAAC,MAAM,GAAG,IAAI;AACnB,kBAAW,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CACtB,KAAK,CAAC,kBAAQ,EAAE;AACf,iBAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;AACvC,gBAAQ,KAAK,CAAC,MAAM,EAAE,IAAI,QAhCZ,MAAM,CAgCa,OAAO,CAAC;QAC1C,CAAC;AACJ,cAAO,IAAI;MACZ;IACF;EACF,C;;;;;;;;;;;;mBCrCc,UAAC,IAAI,EAAG;AACrB,OAAI,CAAC,QAAQ,GAAG,YAAM;AACpB,YAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;IACpC;;AAED,OAAI,CAAC,KAAK,GAAG;YAAO;AAClB,WAAI,EAAE,IAAI,CAAC,IAAI,EAAE;AACjB,WAAI,EAAE,IAAI,CAAC,IAAI,EAAE;AACjB,iBAAU,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE;AACjD,iBAAU,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE;AACjD,aAAM,EAAE,IAAI,CAAC,MAAM,EAAE;AACrB,gBAAS,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;AACjC,eAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,WAAC;gBAAG,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,EAAE;QAAC,CAAC;MACvE;IAAC;EACH,C;;;;;;;;;;;;;;;;;;;;mBCXc,UAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAG;AACzC,OAAI,CAAC,IAAI,GAAG,YAAa;uCAAT,IAAI;AAAJ,WAAI;;;AACpB,SAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AAChB,cAAQ,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,IAAE,CAAC,GAC7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAClB,IAAI,CAAC,IAAI,CAAC,KAAK;MAClB;AACH,SAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK;AAC7B,SAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI;AACtB,gBAXY,qBAAqB,EAWX,IAAI,EAAE,MAAM,EAC7B,IAAI,CAAC,MAAM,GAAC,CAAC,GAAC,IAAI,GAAC,IAAI,CAAC,CAAC,CAAC,EAC1B,OAAO,CAAC,MAAM,GAAC,CAAC,GAAC,OAAO,GAAC,OAAO,CAAC,CAAC,CAAC,CAAE;AAC1C,YAAO,IAAI;IACV;AACD,OAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI;EACvB,C","file":"nflow.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:4000/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a375f8118cf3a369fad5\n **/","import flow from './nflow'\nglobal.nflow = flow\nmodule.exports = flow\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import factory from './factory'\nimport {DEFAULTS} from './consts'\nimport logger from './logger'\n\nvar root = factory(DEFAULTS, \"flow\")\nlogger.init(root)\nglobal.nflow = root\nexport default root\n\n\n/** WEBPACK FOOTER **\n ** ./src/nflow.js\n **/","import * as behaviours from './behaviours'\n\n\nexport default (defaults, name, data)=>{\n  var flow = defaults.factory()\n\n  defaults\n    .behaviours\n    .forEach((d)=>{\n      behaviours[d](flow, defaults, name, data)\n  })\n\n  return flow\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/factory.js\n **/","export {default as cancellable } from './cancellable'\nexport {default as connect } from './connect'\nexport {default as create } from './create'\nexport {default as emit } from './emit'\nexport {default as identify } from './identify'\nexport {default as listen } from './listen'\nexport {default as loggable } from './loggable'\nexport {default as stateful } from './stateful'\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/behaviours/index.js\n **/","import { DEFAULTS\n       , ERRORS\n       , STATUS\n       , DIRECTION\n       , UNSET } from '../consts'\nimport {assert, detach, dispatchInternalEvent} from '../utils'\n\nexport default (flow, defaults, name)=>{\n  \n  flow.cancel = (...args) => {\n    assert(args.length\n         , ERRORS.invalidCancelArgs)\n    dispatchInternalEvent(flow, 'cancel', true)\n    flow.status.value = STATUS.CANCELLED\n    return flow\n  }\n\n  flow.isCancelled = () => {\n    return [flow]\n      .concat(flow.parents())\n      .some(e=>e.status.value == STATUS.CANCELLED)\n  }\n\n  flow.stopPropagation = (...args) => {\n    assert(args.length\n         , ERRORS.invalidStopPropagationArgs)\n    flow.status.value = STATUS.STOPPED\n    dispatchInternalEvent(flow, 'propagationStopped', true)\n    return flow\n  }\n\n  flow.propagationStopped = () => {\n    return flow.status.value == STATUS.STOPPED\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/behaviours/cancellable.js\n **/","/**\n *  consts\n */\n\nexport const UNSET = {}\nexport const DIRECTION = {\n  NONE: \"NONE\",\n  DEFAULT: \"DEFAULT\",\n  UPSTREAM: \"UPSTREAM\",\n  DOWNSTREAM: \"DOWNSTREAM\"\n}\n\nexport const STATUS = {\n  IDLE: \"IDLE\",\n  FLOWING: \"FLOWING\",\n  STOPPED: \"STOPPED\",\n  COMPLETED: \"COMPLETED\",\n  CANCELLED: \"CANCELLED\"\n}\n\nexport const DEFAULTS = {\n  factory: ()=>({}),\n  behaviours:[\n    'identify',\n    'stateful',\n    'connect',\n    'create',\n    'emit',\n    'listen',\n    'cancellable',\n    'loggable'\n  ],\n  direction: DIRECTION.DEFAULT\n}\nexport const ERRORS = {\n  invalidGuid:     'Invalid Argument. Guid-s are immutable. Please use the .name() API to change the name of a flow object.'\n, invalidChildren: 'Invalid Argument. Please use child.parent(parent) to re-parent flow objects.'\n, invalidListener: 'Invalid Arguments. Please use .on(\"foo\", handler) to create a listener.'\n, invalidListenerType: 'Invalid Listener function. Expected a function, got: %s'\n, invalidEventName:'Invalid Arguments. Please use .emit(\"foo\", payload) to emit a flow event.'\n, invalidName:'Invalid flow Name. Expected a String value, got: %s'\n, invalidParent:'Invalid flow parent object. Expected a flow instance, got: %s'\n, invalidParents:'Invalid Argument. Please use the child.parent(parent) API to re-parent flow objects.'\n, invalidStatus:'Invalid Argument. The .status() API is read only'\n, invalidCancelArgs:'Invalid Argument. The .cancel() API requires no parameters'\n, invalidStopPropagationArgs:'Invalid Argument. The .stopPropagation() API requires no parameters'\n, invalidRoot:'Invalid Argument. The .parents.root() API is read only'\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/consts.js\n **/","import factory from './factory'\nimport { DEFAULTS\n       , ERRORS\n       , STATUS\n       , DIRECTION\n       , UNSET } from './consts'\nimport logger from './logger'\n/**\n *  utils\n */\nexport function assert(condition, error, val){\n  if (condition) {\n    throw new Error(error\n      .replace(\"%s\", val))\n  }\n  return condition\n}\n\nexport function isFlow(flow){\n  return flow \n    && flow.name\n    && flow.name.isFlow\n}\n\nexport function isInternal(flow){\n  return flow \n    && flow.name\n    && flow.name.isInternal\n}\n\nexport function detach(flow){\n  flow.parent() \n    && flow.parent().children.detach(flow)\n}\n\nexport function isDetached(flow){\n  return !flow.parent()\n    || !flow.parent().children.has(flow)\n}\n\nexport function flatten(array){\n  return [].concat.apply([], array);\n}\n\nexport function merge(source, target){\n  Object.keys(source).forEach(key=>{\n    target[key]= source[key]\n  })\n}\n\nexport function dispatchInternalEvent(flow, name, newData, oldData){\n  var e= factory(DEFAULTS, \"flow.\"+name)\n  e.name.isInternal = true\n  e.data.value = [newData, oldData]\n  e.direction.value= DIRECTION.NONE\n  e.parent.value = flow\n  e.emit()\n  e.data.value = [flow, newData, oldData]\n  e.direction.value= DIRECTION.UPSTREAM\n  e.name.value=\"flow.children.\"+name\n  e.emit()\n  \n  e.direction.value= DIRECTION.DOWNSTREAM\n  e.name.value=\"flow.parent.\"+name\n  e.emit()\n  \n  logger.log(flow, name, newData, oldData)\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","import {isInternal} from './utils'\nimport { DEFAULTS\n       , ERRORS\n       , STATUS\n       , DIRECTION\n       , UNSET } from './consts'\nimport factory from './factory'\n\nvar devToolsEnabled = false\nvar loggers = []\n\nfunction log(flow, name, newData, oldData){\n  !isInternal(flow)\n    && loggers.forEach(f=>f(flow, name, newData, oldData))\n  \n  devToolsEnabled\n    && debug(flow, name, newData, oldData)\n}\n\nfunction debug(flow, name, d, d0){\n  sendToDevTools(name, \n    {\n      name: d.name.value, \n      id: d.guid.value,\n      parentId: flow.guid.value\n    })\n}\n\nfunction sendToDevTools(action, payload){\n  var eventDetail = {\n    action: action, \n    payload:payload\n  };\n  var flowEvent = new document.defaultView.CustomEvent(\"FlowEvent\", {detail: eventDetail});\n  document.dispatchEvent(flowEvent);\n}\n\n\nfunction init(flow){\n\n  flow.enableDevTools = (enabled=UNSET)=>{\n    if (enabled===UNSET) return devToolsEnabled\n    devToolsEnabled = enabled\n    if (enabled) {\n      sendToDevTools('start', {\n        name: flow.name.value, \n        id: flow.guid.value\n      })\n    }\n    return flow\n  }\n  \n\n  flow.logger = (logger=UNSET) => {\n    if (logger===UNSET) return loggers\n    loggers.push(logger)\n    return flow\n  }\n\n}\n\n\nexport default { \n  init\n, log\n, sendToDevTools\n  }\n\n\n/** WEBPACK FOOTER **\n ** ./src/logger.js\n **/","import {assert, detach, dispatchInternalEvent, isFlow} from '../utils'\nimport { ERRORS, UNSET } from '../consts'\n\nexport default (flow)=>{\n  \n  /**\n   *  .children() API\n   */\n  flow.children = (...args) => {\n    assert(args.length, ERRORS.invalidChildren)\n    return flow.children.value.concat()\n  }\n  flow.children.value = []\n\n  flow.children.has = (matcher, recursive)=>flow.children.find(matcher, recursive)!=null\n  flow.children.find = (matcher, recursive)=>flow.children.findAll(matcher, recursive).pop()\n  flow.children.findAll = (matcher, recursive)=>{\n\n    var filter = matcher;\n    if (matcher==null) return []\n    if (typeof(matcher)==\"string\") filter = f=>f.name()==matcher\n    else if (isFlow(matcher)) filter = f=>f==matcher\n    var children = recursive \n      ? flow.children.all()\n      : flow.children()\n    \n    return children.filter(filter)\n  }\n\n  flow.get = flow.children.find\n  flow.getAll = flow.children.find\n\n  /**\n   *  return all children recursively\n   */\n  flow.children.all = (...args)=>{\n    assert(args.length, ERRORS.invalidChildren)\n    var childMap = {}\n    return getChildren(flow)\n\n    function getChildren(flow){\n      if (childMap[flow.guid()]) return [];\n      childMap[flow.guid()] = true\n      var c = flow.children.value\n      var gc = flow.children.value.map(getChildren)\n      \n      return c.concat.apply(c, gc);\n    }\n\n  }\n\n  /**\n   *  .parent() API\n   */\n  flow.parent = (parent=UNSET) => {\n    if (parent===UNSET) return flow.parent.value;\n    parent && assert(!isFlow(parent), ERRORS.invalidParent, parent)\n    var previousParent = flow.parent() \n    detach(flow)\n    dispatchInternalEvent(flow, 'childRemoved', previousParent)\n    attach(parent)\n    dispatchInternalEvent(flow, 'childAdded', parent, previousParent)\n    return flow\n  }\n\n  flow.parents = (...args)=>{\n    assert(args.length, ERRORS.invalidParents)\n    var parentMap = {}\n    var parents = []\n    var p = flow.parent()\n    while (p && !parentMap[p.guid()]){\n      parents.push(p)\n      parentMap[p.guid()]=true\n      p = p.parent()\n    }\n    return parents \n  }\n\n  flow.parents.find = (matcher)=>{\n    return flow.parents()\n      .filter(typeof(matcher)==\"string\"\n          ? (f=>f.name()==matcher)\n          : matcher)\n      .pop()\n  }\n\n  flow.parents.root = (...args)=>{\n    assert(args.length, ERRORS.invalidRoot)\n    return flow\n      .parents()\n      .pop()\n  }\n\n  flow.children.detach = (child)=>{\n    flow.children.value = \n      flow.children.value\n        .filter(f=>f!=child)\n  }\n\n  function attach(parent) {\n    parent && parent.children.value.push(flow)\n    flow.parent.value = parent\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/behaviours/connect.js\n **/","import factory from '../factory'\nimport logger from '../logger'\nimport {assert, dispatchInternalEvent} from '../utils'\n\nexport default (flow, defaults)=>{\n\n  flow.create = (name, ...data) => {\n    \n    var instance = flow.get(name)\n    if (instance){\n      instance.data(...data)\n      return instance\n    }\n    instance = factory(flow.create.defaults, name, data)\n    instance.parent.value = flow\n    flow.children.value.push(instance)\n    dispatchInternalEvent(flow, 'create', instance)\n    return instance\n  }\n\n  flow.create.defaults = {\n    factory: defaults.factory,\n    behaviours: defaults.behaviours.concat(),\n    direction: defaults.direction\n\n  }\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/behaviours/create.js\n **/","import { DEFAULTS\n       , ERRORS\n       , STATUS\n       , DIRECTION\n       , UNSET } from '../consts'\n\nimport {merge, detach, flatten, assert, isDetached, isFlow} from '../utils'\nimport logger from '../logger'\n\nvar log = logger.log\nexport default (flow)=>{\n  \n  flow.status = (...args) => {\n    assert(args.length\n         , ERRORS.invalidStatus)\n    return flow.status.value\n  }\n  flow.status.value = STATUS.IDLE\n  merge(STATUS, flow.status)\n  \n\n  flow.direction = (direction=UNSET) => {\n    if (direction===UNSET) return flow.direction.value\n    flow.direction.value = direction\n    return flow\n  }\n  flow.direction.value = flow.create.defaults.direction\n  merge(DIRECTION, flow.direction)\n\n  flow.emit = (name=UNSET, ...args) => {\n    if (name==UNSET) {\n      // emit current flow object\n      detach(flow)\n      log(flow, 'emit', flow)\n      flow.emit.route(flow)\n      log(flow, 'emitted', flow)\n      return flow\n    }\n    if (isFlow(name)) {\n      //1. reparent the passed in flow object where it's emitted from\n      name.parent(flow)\n\n      //2.  emit the passed in flow object\n      detach(flow)\n      log(name, 'emit', name)\n      flow.emit.route(name)\n      log(name, 'emitted', name)\n      return flow\n    }\n\n    assert(typeof(name)!='string'\n      , ERRORS.invalidEventName)\n    \n    var event = flow.create(name, ...args)\n    detach(event)\n    log(event, 'emit', event)\n    flow.emit.route(event)\n    log(event, 'emitted', event)\n    return event\n  }\n\n  flow.emit.route = (flow)=>{\n    // 2. reset status\n    flow.emit.recipients = []\n    flow.emit.recipientsMap = {}\n    \n    flow.status.value = STATUS.FLOWING;\n    \n    // only keep unique recipients\n    flow.emit.targets = flow.emit.route[flow.direction()](flow)\n      .filter(f=>{\n        if (flow.emit.recipientsMap[f.guid()]) return false\n        return flow.emit.recipientsMap[f.guid()] = true\n      })\n\n    while (flow.emit.targets.length){\n      var destination = flow.emit.targets.shift()\n      if (flow.isCancelled()) break;\n      if (flow.propagationStopped()) break;\n      notify(flow, destination)\n    }\n  }\n\n  flow.emit.route.DEFAULT = (flow)=>{\n    return flatten([flow].concat(flow.parents())\n      .map((node)=>{\n        if (isDetached(node)\n          || !node.parent()) return [node]\n          .concat(node.children.all())\n        //TODO check circular deps\n        return [node]\n    }))}\n\n  flow.emit.route.UPSTREAM = (flow)=>{\n    return [flow].concat(flow.parents())\n  }\n\n  flow.emit.route.DOWNSTREAM = (flow)=>{\n    return flatten([flow]\n      .concat(flow.parent())\n      .concat(flow.parent().children.all())\n      .filter(Boolean)\n    )}\n\n  flow.emit.route.NONE = (flow)=>[flow, flow.parent()]\n\n  function notify(flow, currentNode){\n    if (currentNode.on.notifyListeners(flow)) {\n      flow.emit.recipientsMap[currentNode.guid()] = flow.direction()\n      flow.emit.recipients.push(currentNode)\n    }\n  }\n\n\n  function getNextFlowDestination(currentNode, direction){\n    return {\n      NONE: [currentNode],\n      UPSTREAM: [currentNode.parent()],\n      DEFAULT: [currentNode.parent()],\n      DOWNSTREAM: currentNode.children()\n    }[direction]\n  }\n\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/behaviours/emit.js\n **/","import { DEFAULTS\n       , ERRORS\n       , STATUS\n       , DIRECTION\n       , UNSET } from '../consts'\n\nimport logger from '../logger'\nimport {assert, dispatchInternalEvent} from '../utils'\n\nvar guid = 0\nexport default (flow, defaults, name)=>{\n  \n  flow.guid = (...args) => {\n    assert(args.length\n         , ERRORS.invalidGuid)\n    return flow.guid.value\n  }\n  flow.guid.value = \"\"+guid++\n\n  flow.name = (name=UNSET) => {\n    if (name===UNSET) return flow.name.value\n    assert(typeof(name)!=\"string\"\n         , ERRORS.invalidName, name)\n    var previousName = flow.name.value\n    flow.name.value = name\n    dispatchInternalEvent(flow, 'name', name, previousName)\n    return flow\n  }\n  flow.name.value = name || flow.guid()\n  flow.name.isFlow = true\n  flow.name.isInternal = false\n\n  flow.call = (...functions)=>{\n    functions\n      .filter(f=>typeof(f)=='function')\n      .forEach(f=>f(flow))\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/behaviours/identify.js\n **/","import { ERRORS, UNSET, STATUS } from '../consts'\nimport {assert} from '../utils'\nimport logger from '../logger'\n\nexport default (flow)=>{\n  var listenerMap = {};\n  flow.on = (name=UNSET, ...args) => {\n    if (name==UNSET) return listenerMap //TODO clone this!\n    assert(typeof(name)!='string'\n      , ERRORS.invalidListener)\n    \n    if (!args.length) {\n      return listenerMap[name]\n    }\n\n    if (args.length==1 && args[0]==null) {\n      delete listenerMap[name]\n      return flow;\n    }\n    listenerMap[name] = args\n      .filter(l=>!assert(typeof(l)!='function'\n        , ERRORS.invalidListenerType, typeof(l)+\": \"+l)\n      )\n    return flow\n  }\n\n  flow.on.notifyListeners = (event)=>{\n    if (listenerMap[event.name()]) {\n      event.target = flow\n      listenerMap[event.name()]\n        .every(listener=>{\n          listener.apply(event, event.data.value)\n          return (event.status() == STATUS.FLOWING)\n        })\n      return true\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/behaviours/listen.js\n **/","export default (flow)=>{\n  flow.toString = () => {\n    return JSON.stringify(flow.toObj())\n  }\n\n  flow.toObj = () => ({\n    name: flow.name(),\n    guid: flow.guid(),\n    parentName: flow.parent() && flow.parent().name(),\n    parentGuid: flow.parent() && flow.parent().guid(),\n    status: flow.status(),\n    listeners: Object.keys(flow.on()),\n    children: flow.children().map(f=>({ name: f.name(), guid: f.guid() }))\n  })\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/behaviours/loggable.js\n **/","import logger from '../logger'\nimport {assert, dispatchInternalEvent} from '../utils'\n\nexport default (flow, defaults, name, data)=>{\n    flow.data = (...data) => {\n    if (!data.length) {\n      return (flow.data.value.length<=1)\n        ? flow.data.value[0]\n        : flow.data.value\n      }\n    var oldData = flow.data.value\n    flow.data.value = data\n    dispatchInternalEvent(flow, 'data'\n      , (data.length>1?data:data[0])\n      , (oldData.length>1?oldData:oldData[0]))\n    return flow\n    }\n    flow.data.value = data\n  }\n\n\n/** WEBPACK FOOTER **\n ** ./src/behaviours/stateful.js\n **/"],"sourceRoot":""}